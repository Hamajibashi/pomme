import{S as n}from"./sweetalert2.all-1685151c.js";import{_ as v,r as b,o as d,c as r,i as m,f as c,T as p,d as a,b as s,n as u,w as f,t as e,F as x,h as k,e as S}from"./index-0d9e5818.js";const{VITE_BASEURL:g,VITE_APIPATH:w}={VITE_BASEURL:"https://vue3-course-api.hexschool.io",VITE_APIPATH:"hmjbs",BASE_URL:"/pomme/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T={data(){return{order:{products:{},user:{}},id:"",isLoading:!1}},methods:{getOrder(){this.isLoading=!0,this.id=this.$route.params.id;const l=`${g}/v2/api/${w}/order/${this.id}`;this.axios.get(l).then(i=>{this.order=i.data.order,this.isLoading=!1}).catch(i=>{this.isLoading=!1,n.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${i.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})},payOrder(){const l=`${g}/v2/api/${w}/pay/${this.id}`;this.axios.post(l).then(i=>{this.getOrder(),n.fire({iconColor:"#004c34",iconHtml:'<i class="bi bi-check-circle-fill"></i>',text:`${i.data.message}`,showConfirmButton:!1,width:250,timer:1200})}).catch(i=>{n.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${i.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})}},mounted(){this.getOrder()}},C={class:"container-md"},E={class:"py-5"},L={class:"mb-5 d-flex flex-column flex-sm-row text-center justify-content-center align-items-center"},B=S('<div class="bg-primary text-light p-3 w-100"><span class="fs-7">Step.1</span><p class="mb-0">訂單建立</p></div><i class="bi bi-arrow-right fs-4 mx-2 d-none d-sm-block"></i><i class="bi bi-arrow-down fs-4 mb-2 d-sm-none"></i>',3),V=s("span",{class:"fs-7"},"Step.2",-1),O=s("p",{class:"mb-0"},"確認結帳",-1),A=[V,O],N=s("i",{class:"bi bi-arrow-right fs-4 mx-2 d-none d-sm-block"},null,-1),R=s("i",{class:"bi bi-arrow-down fs-4 mb-2 d-sm-none"},null,-1),I=s("span",{class:"fs-7"},"Step.3",-1),H=s("p",{class:"mb-0"},"完成訂單",-1),P=[I,H],j={key:0,class:"bg-primary text-secondary fw-bold p-5 text-center mb-3"},D=s("i",{class:"bi bi-credit-card-fill fs-1"},null,-1),U=s("h3",{class:"text-light mt-3"},"訂單已建立",-1),$=s("h3",{class:"text-light"},"請盡速付款",-1),q=[D,U,$],z={key:1,class:"bg-primary text-secondary p-5 text-center mb-3"},F=s("i",{class:"bi bi-check-circle-fill fs-1"},null,-1),M=s("h3",{class:"fw-bold text-light mt-3 mb-2"},"付款成功",-1),G=s("p",{class:"text-light mb-0"},"謝謝您的光臨！",-1),J=s("p",{class:"text-light mb-2"},"商品將於 3 天內寄出，請留意包裹訊息",-1),K={class:"d-flex flex-column flex-md-row justify-content-center"},Q={class:"row flex-row-reverse"},W={class:"col-lg-5"},X={class:"border p-4 mb-4"},Y=s("h4",{class:"fw-bold mb-3"},"訂單明細",-1),Z={class:"table mt-4 text-primary"},ss=s("th",{scope:"row",class:"border-0"},"付款狀態",-1),ts={key:0,class:"text-end border-0 h4 fw-bold text-danger"},es={key:1,class:"text-end border-0 h4 fw-bold"},os=s("th",{scope:"row",class:"border-0"},"訂單編號",-1),ds={class:"text-end border-0"},is={class:"border-bottom"},rs=s("th",{scope:"row",class:"border-0"},"訂購時間",-1),ls={class:"text-end border-0"},cs=s("th",{scope:"row",class:"border-0"},"姓名",-1),ns={class:"text-end border-0"},as=s("th",{scope:"row",class:"border-0"},"Email",-1),_s={class:"text-end border-0"},hs=s("th",{scope:"row",class:"border-0"},"地址",-1),bs={class:"text-end border-0"},ms=s("th",{scope:"row",class:"border-0"},"留言",-1),ps={key:0,class:"border-0 text-end text-break",width:"70%"},us={key:1,class:"text-end border-0 text-muted"},fs=["disabled"],xs={class:"col-lg-7"},gs={class:"table text-primary"},ws=s("thead",null,[s("tr",null,[s("th",{class:"ps-0"},"商品名稱"),s("th",{class:"d-none d-md-table-cell",width:"20%"},"數量"),s("th",{class:"d-none d-md-table-cell",width:"20%"},"單價"),s("th",{class:"d-none d-md-table-cell text-end",width:"20%"},"小計")])],-1),ys={scope:"row",class:"border-0 px-0 py-4 d-flex align-items-center"},vs=["src","alt"],ks={class:"ms-3"},Ss={class:"mb-2 fw-bold"},Ts={class:"d-md-none"},Cs={class:"mb-2"},Es={class:"text-start"},Ls={class:"border-0 align-middle d-none d-md-table-cell"},Bs={class:"mb-0 fw-bold"},Vs={class:"border-0 align-middle d-none d-md-table-cell"},Os={class:"mb-0 pe-5"},As={class:"border-0 align-middle d-none d-md-table-cell text-end"},Ns={class:"mb-0 pe-2"},Rs={class:"text-end fw-bold"},Is=s("td",{colspan:"2"},"總金額",-1),Hs={colspan:"2",class:"fs-3"};function Ps(l,i,js,Ds,t,_){const y=b("loading-component"),h=b("RouterLink");return d(),r(x,null,[t.order.is_paid?(d(),m(p,{key:1,to:"title"},[c(" | 謝謝惠顧")])):(d(),m(p,{key:0,to:"title"},[c(" | 訂單已建立")])),a(y,{active:t.isLoading,"z-index":1060},null,8,["active"]),s("div",C,[s("div",E,[s("div",L,[B,s("div",{class:u(["text-light p-3 w-100",t.order.is_paid?"bg-primary":"bg-secondary"])},A,2),N,R,s("div",{class:u(["bg-primary text-light p-3 w-100",t.order.is_paid?"bg-secondary":"bg-primary"])},P,2)]),t.order.is_paid?(d(),r("div",z,[F,M,G,J,s("div",K,[a(h,{to:"/menu",class:"btn btn-outline-secondary text-light mx-2 mb-2 mb-md-0"},{default:f(()=>[c("看看菜單")]),_:1}),a(h,{to:"/products",class:"btn btn-secondary text-light mx-2"},{default:f(()=>[c("繼續選購")]),_:1})])])):(d(),r("div",j,q)),s("div",Q,[s("div",W,[s("div",X,[Y,s("table",Z,[s("tbody",null,[s("tr",null,[ss,t.order.is_paid?(d(),r("td",es,"已付款")):(d(),r("td",ts,"尚未付款"))]),s("tr",null,[os,s("td",ds,e(t.order.id),1)]),s("tr",is,[rs,s("td",ls,e(l.$filters.date(t.order.create_at)),1)]),s("tr",null,[cs,s("td",ns,e(t.order.user.name),1)]),s("tr",null,[as,s("td",_s,e(t.order.user.email),1)]),s("tr",null,[hs,s("td",bs,e(t.order.user.address),1)]),s("tr",null,[ms,t.order.message?(d(),r("td",ps,e(t.order.message),1)):(d(),r("td",us,"（空白）"))])])]),s("button",{type:"button",class:"btn btn-lg btn-primary w-100",onClick:i[0]||(i[0]=(...o)=>_.payOrder&&_.payOrder(...o)),disabled:t.order.is_paid}," 付款 ",8,fs)])]),s("div",xs,[s("table",gs,[ws,s("tbody",null,[(d(!0),r(x,null,k(t.order.products,o=>(d(),r("tr",{class:"border-bottom border-top",key:o.id},[s("th",ys,[s("img",{src:o.product.imageUrl,alt:o.product.title,class:"object-cover img-fluid",style:{width:"72px",height:"72px"}},null,8,vs),s("div",ks,[s("p",Ss,e(o.product.title),1),s("div",Ts,[s("div",Cs," $"+e(o.total),1),s("span",Es,"數量："+e(o.qty),1)])])]),s("td",Ls,[s("p",Bs,e(o.qty),1)]),s("td",Vs,[s("p",Os,"NT$ "+e(l.$filters.currency(o.product.price)),1)]),s("td",As,[s("p",Ns,"NT$ "+e(l.$filters.currency(o.total)),1)])]))),128))]),s("tfoot",null,[s("tr",Rs,[Is,s("td",Hs,"NT$ "+e(l.$filters.currency(t.order.total)),1)])])])])])])])],64)}const qs=v(T,[["render",Ps]]);export{qs as default};
