import{_ as k,m as C,a as x,r as f,o as n,c as l,i as $,f as c,T as I,d as h,b as t,D as i,G as T,F as r,h as _,w as g,t as d,g as m,H as B,E as v}from"./index-4046efe6.js";import{C as y}from"./CartStore-e84cab98.js";import{S as V}from"./sweetalert2.all-1c40de96.js";const N={data(){return{coupon:""}},methods:{checkRemove(){V.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:"確定要清空購物車嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消",width:250,reverseButtons:!0,buttonsStyling:!1,customClass:{confirmButton:"btn btn-danger mx-2",cancelButton:"btn btn-outline-gray mx-2"}}).then(e=>{e.isConfirmed&&this.removeAll()})},...C(y,["getCart","removeItem","removeAll","updateItem","useCoupon"])},computed:{...x(y,["cart","total","final_total","loadingItem","isLoading"])},mounted(){this.getCart()}},S={class:"container-md"},j={class:"py-5"},U=t("h3",{class:"fw-bold mb-3"},"購物車",-1),q={class:"row"},A={class:"col"},D={class:"text-end mb-2"},L={key:0,class:"table text-primary mb-0"},R=t("thead",null,[t("tr",null,[t("th",{class:"ps-0 d-sm-none w-100"},"商品詳細"),t("th",{width:"30%",class:"ps-0 d-none d-sm-table-cell"},"商品名稱"),t("th",{width:"10%",class:"text-center d-none d-sm-table-cell"},"數量"),t("th",{width:"20%",class:"text-center d-none d-sm-table-cell"},"單價"),t("th",{width:"20%",class:"text-center d-none d-sm-table-cell"},"小計"),t("th",{width:"20%",class:"text-end d-none d-sm-table-cell"},"移除")])],-1),z={scope:"row",class:"px-0 py-4 d-flex align-items-center"},E=["src","alt"],F={class:"ms-3"},H={class:"mb-0 fw-bold d-inline-block"},M={class:"d-sm-none"},G={class:"mb-2"},P=["disabled","onUpdate:modelValue","onChange"],Y=["value"],J={class:"align-middle d-none d-sm-table-cell"},K=["disabled","onUpdate:modelValue","onChange"],O=["value"],Q={class:"align-middle text-center d-none d-sm-table-cell"},W={class:"mb-0"},X={class:"align-middle text-center d-none d-sm-table-cell"},Z={class:"mb-0"},tt={class:"align-middle text-end d-none d-sm-table-cell"},et=["disabled","onClick"],st=t("i",{class:"bi bi-trash fs-5"},null,-1),ot=[st],nt={colspan:"4",class:"align-middle text-end d-sm-none"},lt=["disabled","onClick"],dt=t("i",{class:"bi bi-trash fs-5"},null,-1),at=[dt],ct={key:1,class:"d-flex flex-column justify-content-center align-items-center my-5"},it=t("h4",{class:"mb-5"}," 購物車目前沒有商品哦！ ",-1),rt={key:2},mt={key:0,class:"d-flex justify-content-end align-items-center fw-bold border-bottom py-2 mb-3"},ut=t("p",{class:"mb-0 me-5"},"總金額",-1),ht={class:"mb-0 fs-3"},_t={key:1,class:"d-flex flex-column border-bottom py-2 mb-3"},bt={class:"d-flex justify-content-end align-items-center fs-6 text-muted"},pt={class:"mb-0"},ft={class:"d-flex justify-content-end align-items-center fw-bold"},gt=t("p",{class:"mb-0 me-5"},"優惠價",-1),vt={class:"mb-0 fs-3"},yt={key:3,class:"row flex-column flex-sm-row justify-content-center justify-content-md-between align-items-center"},wt={class:"col-md-6 mb-3"},kt=t("p",{class:"fs-7 mb-0 text-muted"},[c("我們一歲了！輸入 "),t("span",{class:"text-danger"},"Pomme1Year"),c(" 享有 8 折優惠")],-1),Ct={class:"input-group"},xt={class:"input-group-append"},$t={class:"col-md-6 text-end"};function It(e,a,Tt,Bt,u,b){const w=f("loading-component"),p=f("router-link");return n(),l(r,null,[(n(),$(I,{to:"title"},[c(" | 購物車")])),h(w,{active:e.isLoading,"z-index":1060},null,8,["active"]),t("div",S,[t("div",j,[U,t("div",q,[t("div",A,[i(t("div",D,[t("button",{type:"button",class:"btn btn-outline-gray",onClick:a[0]||(a[0]=(...s)=>b.checkRemove&&b.checkRemove(...s))},"清空購物車")],512),[[T,e.cart.length!==0]]),e.cart.length!==0?(n(),l("table",L,[R,t("tbody",null,[(n(!0),l(r,null,_(e.cart,s=>(n(),l("tr",{class:"border-bottom border-top",key:s.id},[t("th",z,[t("img",{src:s.product.imageUrl,alt:s.product.title,style:{width:"72px",height:"72px"},class:"object-cover img-fluid"},null,8,E),t("div",F,[t("p",H,d(s.product.title),1),t("div",M,[t("div",G," $"+d(s.product.price),1),i(t("select",{class:"form-select-sm",disabled:s.id===e.loadingItem,"onUpdate:modelValue":o=>s.qty=o,onChange:o=>e.updateItem(s),style:{width:"100px",height:"30px","font-size":"10px"}},[(n(),l(r,null,_(10,o=>t("option",{value:o,key:o},d(o),9,Y)),64))],40,P),[[v,s.qty,void 0,{number:!0}]])])])]),t("td",J,[i(t("select",{class:"form-select-sm",style:{width:"100%"},disabled:s.id===e.loadingItem,"onUpdate:modelValue":o=>s.qty=o,onChange:o=>e.updateItem(s)},[(n(),l(r,null,_(10,o=>t("option",{value:o,key:o},d(o),9,O)),64))],40,K),[[v,s.qty,void 0,{number:!0}]])]),t("td",Q,[t("p",W,"NT$ "+d(e.$filters.currency(s.product.price)),1)]),t("td",X,[t("p",Z,"NT$ "+d(e.$filters.currency(s.total)),1)]),t("td",tt,[t("button",{type:"button",class:"btn text-muted",disabled:s.id===e.loadingItem,onClick:o=>e.removeItem(s.id)},ot,8,et)]),t("td",nt,[t("button",{type:"button",class:"btn text-muted",disabled:s.id===e.loadingItem,onClick:o=>e.removeItem(s.id)},at,8,lt)])]))),128))])])):(n(),l("div",ct,[it,h(p,{to:"/products",class:"btn btn-primary btn-lg"},{default:g(()=>[c("來去逛逛")]),_:1})])),e.cart.length!==0?(n(),l("div",rt,[e.total===e.final_total?(n(),l("div",mt,[ut,t("p",ht,"NT$ "+d(e.$filters.currency(e.total)),1)])):m("",!0),e.total>e.final_total?(n(),l("div",_t,[t("div",bt,[t("p",pt,"- NT$ "+d(e.$filters.currency(e.total-e.final_total)),1)]),t("div",ft,[gt,t("p",vt,"NT$ "+d(e.$filters.currency(e.final_total)),1)])])):m("",!0)])):m("",!0),e.cart.length!==0?(n(),l("div",yt,[t("div",wt,[kt,t("div",Ct,[i(t("input",{type:"text",class:"form-control rounded-0 shadow-none",placeholder:"請輸入優惠券代碼","onUpdate:modelValue":a[1]||(a[1]=s=>u.coupon=s)},null,512),[[B,u.coupon,void 0,{trim:!0}]]),t("div",xt,[t("button",{class:"btn btn-primary rounded-0",type:"button",onClick:a[2]||(a[2]=s=>e.useCoupon(u.coupon))},"套用")])])]),t("div",$t,[h(p,{class:"btn btn-lg btn-primary px-5",to:"/checkorder"},{default:g(()=>[c("前往結帳")]),_:1})])])):m("",!0)])])])])],64)}const jt=k(N,[["render",It]]);export{jt as default};
