import{j as f,k as s}from"./index-de1000de.js";import{S as i}from"./sweetalert2.all-5c7bd333.js";const{VITE_BASEURL:r,VITE_APIPATH:n}={VITE_BASEURL:"https://vue3-course-api.hexschool.io",VITE_APIPATH:"hmjbs",BASE_URL:"/pomme/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$=f("productStore",{state:()=>({productsData:[],productData:{},mealData:{},coffeeData:{},dessertData:{},page:{},category:"",loading:!1}),actions:{getAllProducts(t){this.category="",this.loading=!0;const e=`${r}/v2/api/${n}/products/all`;s.get(e).then(a=>{const o=a.data.products.reverse().filter(c=>c.category!=="店內餐點"&&c.category!=="店內飲品"&&c.category!=="店內甜點"),l=10,d=Math.ceil(o.length/l),g={total_pages:d,current_page:t,has_pre:t>1,has_next:t<d};this.page=g;const u=(t-1)*l,h=u+l;this.productsData=o.slice(u,h),this.loading=!1}).catch(a=>{this.loading=!1,i.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${a.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})},getProducts(t=1,e){this.category=e,this.loading=!0;const a=`${r}/v2/api/${n}/products?page=${t}&category=${e}`;s.get(a).then(o=>{this.productsData=o.data.products,this.page=o.data.pagination,this.loading=!1}).catch(o=>{this.loading=!1,i.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${o.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})},getMenu(){this.loading=!0;const t=`${r}/v2/api/${n}/products/all`;s.get(t).then(e=>{this.mealData=e.data.products.filter(a=>a.category==="店內餐點"),this.coffeeData=e.data.products.filter(a=>a.category==="店內飲品"),this.dessertData=e.data.products.filter(a=>a.category==="店內甜點"),this.loading=!1}).catch(e=>{this.loading=!1,i.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${e.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})},getProduct(t){this.loading=!0;const e=`${r}/v2/api/${n}/product/${t}`;s.get(e).then(a=>{this.productData=a.data.product,this.loading=!1}).catch(a=>{this.loading=!1,i.fire({iconColor:"#992525",iconHtml:'<i class="bi bi-exclamation-triangle-fill"></i>',text:`${a.response.data.message}`,showConfirmButton:!1,width:250,timer:1500})})}},getters:{products:({productsData:t})=>t,product:({productData:t})=>t,meal:({mealData:t})=>t,coffee:({coffeeData:t})=>t,dessert:({dessertData:t})=>t,pagination:({page:t})=>t,isLoading:({loading:t})=>t}});export{$ as P};
